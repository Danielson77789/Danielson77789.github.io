---
layout: post
title: Baby
date: 2026-01-07 18:10 -0700
categories: [Hack The Box, Retired Machine]
tags: [htb,windows,active directory,seBackupPrivilege]
---
# Enumeration 

![Nmap Scan](assets/markdown_images/BabyHTBMedia/Pasted image 20260107145626.png)

# Initial Foothold 

After realizing I was dealing with a domain controller I had queried through the LDAP which led me to a list of various users on the machine. 

![User Ldap Scan](assets/markdown_images/BabyHTBMedia/Pasted image 20260107150951.png)

From there I started to dig deeper into the LDAP looking for any common hints or misconfigurations on the server, this is where I had found the default password for new users of `BabyStart123!`.

![Ldap Default Password](assets/markdown_images/BabyHTBMedia/Pasted image 20260107151149.png)

Attempting a password spray on the list of users found above with the password discovered did not give any valid credentials which led me back to more LDAP queries where I was able to locate the user `Caroline Robinson`. This user with the password provided gave a successful attempt at password spraying. 

![Password Spray](assets/markdown_images/BabyHTBMedia/Pasted image 20260107165921.png)

However before attempting to login as this user the password had to first be changed.

![Password Reset](assets/markdown_images/BabyHTBMedia/Pasted image 20260107170744.png)

With the new password set I was now able to get access to the machine and retrieve the user flag from the users desktop. 

![Initial Login](assets/markdown_images/BabyHTBMedia/Pasted image 20260107171130.png)

# Privilege Escalation 

Due to the hints in the boxes description the first enumeration I had decided to attempt on successful login as Caroline Robinson was on the users current privileges which showed the `seBackupPrivilege`. 

![Caroline Privileges](assets/markdown_images/BabyHTBMedia/Pasted image 20260107171335.png)

Looking into this privilege I had discovered the escalation tactic found [here](https://github.com/k4sth4/SeBackupPrivilege) which provided the tools and scripts needed to make backups of the `ntds.dit` and  `SYSTEM` files. With these I was able to use the `secretsdump.py` scripts in order to retrieve the hashes of all users on the system. With this I was able to login to the machine using `pass-the-hash` via `evil-winrm` to retrieve the root flag from the admins desktop. 

![Secretes Dump](assets/markdown_images/BabyHTBMedia/Pasted image 20260107180701.png)

![Admin Flag](assets/markdown_images/BabyHTBMedia/Pasted image 20260107180731.png)

